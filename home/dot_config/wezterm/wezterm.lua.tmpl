local wezterm = require 'wezterm'
local config = wezterm.config_builder()

{{ if or (eq .chezmoi.os "windows") (eq .chezmoi.os "darwin") -}}

config.default_prog = { "pwsh.exe", "-NoLogo"}
config.window_decorations = "RESIZE"

{{ else -}}
-- Causes problems on window managers.
config.window_decorations = "NONE"

{{- end }}

config.font_size = 14
config.color_scheme = "tokyonight_night"
config.font = wezterm.font("JetBrainsMono Nerd Font")
config.window_background_opacity = 0.8

config.enable_tab_bar = false

{{ if eq .osid "linux-endeavouros" -}}
config.enable_wayland = true
{{- end }}

config.colors = {
    cursor_bg = "#FFBABE",
    cursor_border = "#FFBABE"
}

config.leader = {
    key = 's',
    mods = 'CTRL',
    timeout_milliseconds = 5000
}
config.keys = {
    {
        key = 'w',
        mods = 'CTRL',
        action = wezterm.action.CloseCurrentPane { confirm = false },
    },
    {
        key = '%',
        mods = 'LEADER|SHIFT',
        action = wezterm.action.SplitHorizontal { domain = 'CurrentPaneDomain' }
    },
    {
        key = '"',
        mods = 'LEADER|SHIFT',
        action = wezterm.action.SplitVertical { domain = 'CurrentPaneDomain' }
    },
    {
        key = 'h',
        mods = 'LEADER',
        action = wezterm.action.ActivatePaneDirection 'Left'
    },
    {
        key = 'l',
        mods = 'LEADER',
        action = wezterm.action.ActivatePaneDirection 'Right'
    },
    {
        key = 'k',
        mods = 'LEADER',
        action = wezterm.action.ActivatePaneDirection 'Up'
    },
    {
        key = 'j',
        mods = 'LEADER',
        action = wezterm.action.ActivatePaneDirection 'Down'
    },
    {
        key = 'u',
        mods = 'LEADER',
        action = wezterm.action.AdjustPaneSize { 'Left', 5 }
    },
    {
        key = 'p',
        mods = 'LEADER',
        action = wezterm.action.AdjustPaneSize { 'Right', 5 }
    },
    {
        key = 'i',
        mods = 'LEADER',
        action = wezterm.action.AdjustPaneSize { 'Up', 5 }
    },
    {
        key = 'o',
        mods = 'LEADER',
        action = wezterm.action.AdjustPaneSize { 'Down', 5 }
    }
}



return config
